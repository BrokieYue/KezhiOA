@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Index.cshtml";
}
<script>

    $(function () {
        loadIFStatus();
    })

    //空橇操作
    function OptionCarried(cType,cValue)
    {
        $.modalConfirm("注：点击确认按钮继续操作！", function (r) {
            if (r) {
                $.submitForm({
                    url: "/ProduceManage/WBS/OutInCarriedSet",
                    param: { type: cType, opValue: cValue },
                    success: function () {
                       
                    }
                })
            }
        });
    }

    //页面加载时获取空橇运行模式
    function loadIFStatus() {
        var fg;
        $.ajax({
            url: "/ProduceManage/WBS/GetIflagJson",
            dataType: "json",
            async: false,
            success: function (data) {
                fg = data.Result;
                if (fg == 0) {
                    document.getElementById('btn_wbsNormal').style.backgroundColor = 'greenyellow';
                    document.getElementById('btn_wbsIn').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsOut').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsNormal').disabled = true;
                }
                else if (fg == 1) {
                    document.getElementById('btn_wbsNormal').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsIn').style.backgroundColor = 'greenyellow';
                    document.getElementById('btn_wbsOut').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsIn').disabled = true;
                }
                else if (fg == 2) {
                    document.getElementById('btn_wbsNormal').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsIn').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsOut').style.backgroundColor = 'greenyellow';
                    document.getElementById('btn_wbsOut').disabled = true;
                }
                else {
                    document.getElementById('btn_wbsNormal').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsIn').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsOut').style.backgroundColor = 'gray';
                    document.getElementById('btn_wbsNormal').disabled = false;
                    document.getElementById('btn_wbsIn').disabled = false;
                    document.getElementById('btn_wbsOut').disabled = false;
                }
            }
        });
    }

    //空橇运行操作
    function OptionCarriedModel(cType) {
        $.modalConfirm("注：点击确认按钮继续操作！", function (r) {
            if (r) {
                $.submitForm({
                    url: "/ProduceManage/WBS/OutInCarriedModeSet",
                    param: { type: cType },
                    success: function () {
                        loadIFStatus();
                    }
                })
            }
        });
    }

</script>

<div style="margin: 5px;">
    <fieldset class="layui-elem-field">
        <legend>空橇控制</legend>
        <div class="layui-field-box">
            <table style="width: 100%;border-collapse:separate; border-spacing:0px 5px;">
                <tr>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0501" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px;color:greenyellow; text-align: center" onclick="OptionCarried(1,1)">H050空橇放行</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0502" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color:blue; text-align: center" onclick="OptionCarried(1, 3)">H050空橇切出</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0503" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px;color:yellow; text-align: center" onclick="OptionCarried(1, 2)">H050空橇切入</a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0711" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: greenyellow; text-align: center" onclick="OptionCarried(2, 1)">H071空橇放行</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0712" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: blue; text-align: center" onclick="OptionCarried(2, 3)">H071空橇切出</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_0713" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: yellow; text-align: center" onclick="OptionCarried(2, 2)">H071空橇切入</a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>
                      
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_090" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: greenyellow; text-align: center" onclick="OptionCarried(3, 1)">H090空橇放行</a>
                        </span>
                    </td>
                    <td></td>
                    </tr>
                <tr>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1101" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: greenyellow; text-align: center" onclick="OptionCarried(4, 1)">H110空橇放行</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1102" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: blue; text-align: center" onclick="OptionCarried(4, 3)">H110空橇切出</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1103" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: yellow; text-align: center" onclick="OptionCarried(4, 2)">H110空橇切入</a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1301" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: greenyellow; text-align: center" onclick="OptionCarried(5, 1)">H130空橇放行</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1302" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: blue; text-align: center" onclick="OptionCarried(5, 3)">H130空橇切出</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_1303" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; color: yellow; text-align: center" onclick="OptionCarried(5, 2)">H130空橇切入</a>
                        </span>
                    </td>
                </tr>
            </table>
          
        </div>

        <legend>WBS空橇运行模式</legend>
        <div class="layui-field-box">
            <table style="width: 100%;border-collapse:separate; border-spacing:0px 5px;">
                <tr>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_wbsNormal" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px;background-color:greenyellow; text-align: center" onclick="OptionCarriedModel(0)">正常模式</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_wbsIn" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; background-color: gray; text-align: center" onclick="OptionCarriedModel(1)">入库模式</a>
                        </span>
                    </td>
                    <td>
                        <span class="input-group-btn">
                            <a id="btn_wbsOut" class="btn btn-primary " style="width: 80%; height: 55px; font-size: 40px; background-color: gray; text-align: center" onclick="OptionCarriedModel(2)">出库模式</a>
                        </span>
                    </td>
                </tr>
            </table>
       </div>
</fieldset>
</div>
